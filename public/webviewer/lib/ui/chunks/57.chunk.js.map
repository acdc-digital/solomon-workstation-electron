{"version":3,"sources":["webpack:///./src/ui/src/components/PageManipulationOverlay/CustomPageManipulationOperations/CustomPageManipulationOperations.js","webpack:///./src/ui/src/components/PageManipulationOverlay/CustomPageManipulationOperations/index.js","webpack:///./src/ui/src/components/PageManipulationOverlay/PageManipulationOverlay.js","webpack:///./src/ui/src/components/PageManipulationOverlay/PageManipulationOverlayContainer.js","webpack:///./src/ui/src/components/PageManipulationOverlay/index.js"],"names":["CustomPageManipulationOperations","props","dataElement","pageNumbers","header","operations","DataElementWrapper","className","map","operation","key","onClick","img","Button","title","role","renderIcon","InitialPageManipulationOverlay","children","pageManipulationOverlayItems","childrenArray","React","Children","toArray","item","index","type","component","find","child","cloneElement","PageManipulationOverlay","dispatch","useDispatch","closeOverlay","useCallback","actions","setPageManipulationOverlayAlternativePosition","closeElements","DataElements","PAGE_MANIPULATION_OVERLAY","document","core","getDocument","documentType","isXod","workerTypes","XOD","isOffice","OFFICE","LEGACY_OFFICE","filteredPageManipulationOverlayItems","removedIndices","reduce","acc","push","filter","_","includes","useEffect","addEventListener","removeEventListener","PageAdditionalControls","PageRotationControls","PageManipulationControls","PageManipulationOverlayContainer","useSelector","state","selectors","getSelectedThumbnailPageIndexes","getCurrentPage","getPageManipulationOverlayItems","shallowEqual","selectedPageIndexes","currentPage","length","i","t","useTranslation","FlyoutMenu","menu","trigger","PAGE_MANIPULATION_OVERLAY_BUTTON","ariaLabel","aria-live"],"mappings":"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","file":"chunks/57.chunk.js","sourcesContent":["import React from 'react';\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport Button from 'components/Button';\n\nfunction CustomPageManipulationOperations(props) {\n  const { dataElement, pageNumbers, header, operations } = props;\n\n  function renderIcon(operation) {\n    if (operation.img) {\n      return (\n        <Button\n          title={operation.title}\n          img={operation.img}\n          role=\"option\"\n        />\n      );\n    }\n  }\n\n  return (\n    <>\n      <DataElementWrapper\n        dataElement={dataElement}\n        className=\"type\"\n      >\n        {header}\n      </DataElementWrapper>\n      {operations.map((operation) => {\n        return (\n          <DataElementWrapper\n            key={operation.dataElement}\n            className=\"row\"\n            dataElement={operation.dataElement}\n            onClick={() => operation.onClick(pageNumbers)}\n          >\n            {renderIcon(operation)}\n            <div className=\"title\">{operation.title}</div>\n          </DataElementWrapper>\n        );\n      })}\n    </>\n  );\n}\n\nexport default CustomPageManipulationOperations;","import CustomPageManipulationOperations from './CustomPageManipulationOperations';\n\nexport default CustomPageManipulationOperations;","import actions from 'actions';\nimport React, { useEffect, useCallback } from 'react';\nimport PageRotationControls from './PageRotationControls';\nimport PageManipulationControls from './PageManipulationControls';\nimport PageAdditionalControls from 'components/PageManipulationOverlay/PageAdditionalControls';\nimport CustomPageManipulationOperations from './CustomPageManipulationOperations';\nimport { workerTypes } from 'constants/types';\nimport core from 'core';\n\nimport { useDispatch } from 'react-redux';\nimport DataElements from 'src/constants/dataElement';\n\nfunction InitialPageManipulationOverlay({ children, pageNumbers, pageManipulationOverlayItems }) {\n  const childrenArray = React.Children.toArray(children);\n\n  return pageManipulationOverlayItems.map((item, index) => {\n    const { dataElement, type } = item;\n    let component = childrenArray.find((child) => child.props.dataElement === dataElement);\n    const key = dataElement || `${type}-${index}`;\n\n    if (!component) {\n      if (type === 'divider') {\n        component = <div className=\"divider\" />;\n      }\n\n      if (type === 'customPageOperation') {\n        component = <CustomPageManipulationOperations key={dataElement} pageNumbers={pageNumbers} {...item} />;\n      }\n    }\n\n    return component\n      ? React.cloneElement(component, {\n        key,\n      })\n      : null;\n  });\n}\n\n\nfunction PageManipulationOverlay(props) {\n  const { pageNumbers, pageManipulationOverlayItems } = props;\n\n  const dispatch = useDispatch();\n\n  const closeOverlay = useCallback(() => {\n    dispatch(actions.setPageManipulationOverlayAlternativePosition(null));\n    dispatch(actions.closeElements([DataElements.PAGE_MANIPULATION_OVERLAY]));\n  }, [dispatch]);\n\n  const document = core.getDocument();\n  const documentType = document?.type;\n  const isXod = documentType === workerTypes.XOD;\n  const isOffice = documentType === workerTypes.OFFICE || documentType === workerTypes.LEGACY_OFFICE;\n  let filteredPageManipulationOverlayItems = pageManipulationOverlayItems;\n  if (isXod || isOffice) {\n    const removedIndices = filteredPageManipulationOverlayItems.reduce((acc, { dataElement }, index) => {\n      if (dataElement === 'pageAdditionalControls') {\n        acc.push(index);\n        if (filteredPageManipulationOverlayItems[index + 1]?.type === 'divider') {\n          acc.push(index + 1);\n        }\n      }\n      if (dataElement === 'pageManipulationControls') {\n        acc.push(index);\n        if (filteredPageManipulationOverlayItems[index - 1]?.type === 'divider') {\n          acc.push(index - 1);\n        }\n      }\n      return acc;\n    }, []);\n    filteredPageManipulationOverlayItems = filteredPageManipulationOverlayItems.filter((_, index) => !removedIndices.includes(index));\n  }\n\n  useEffect(() => {\n    core.addEventListener('documentLoaded', closeOverlay);\n    return () => {\n      core.removeEventListener('documentLoaded', closeOverlay);\n    };\n  }, []);\n\n  return (\n    <InitialPageManipulationOverlay pageNumbers={pageNumbers} pageManipulationOverlayItems={filteredPageManipulationOverlayItems}>\n      { !isXod && !isOffice && <PageAdditionalControls pageNumbers={pageNumbers} dataElement=\"pageAdditionalControls\" /> }\n      <PageRotationControls pageNumbers={pageNumbers} dataElement=\"pageRotationControls\" />\n      { !isXod && !isOffice && <PageManipulationControls pageNumbers={pageNumbers} dataElement=\"pageManipulationControls\" /> }\n    </InitialPageManipulationOverlay>\n  );\n}\n\nexport default PageManipulationOverlay;","import React from 'react';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport PageManipulationOverlay from './PageManipulationOverlay';\nimport FlyoutMenu from '../FlyoutMenu/FlyoutMenu';\nimport selectors from 'selectors';\nimport DataElements from 'constants/dataElement';\nimport { useTranslation } from 'react-i18next';\n\nfunction PageManipulationOverlayContainer() {\n  const [\n    selectedPageIndexes,\n    currentPage,\n    pageManipulationOverlayItems,\n  ] = useSelector((state) => [\n    selectors.getSelectedThumbnailPageIndexes(state),\n    selectors.getCurrentPage(state),\n    selectors.getPageManipulationOverlayItems(state),\n  ], shallowEqual);\n\n  // If we start drilling this prop, maybe create a context\n  const pageNumbers = selectedPageIndexes.length > 0 ? selectedPageIndexes.map((i) => i + 1) : [currentPage];\n\n  const [t] = useTranslation();\n\n  return (\n    <FlyoutMenu\n      menu={DataElements.PAGE_MANIPULATION_OVERLAY}\n      trigger={DataElements.PAGE_MANIPULATION_OVERLAY_BUTTON}\n      ariaLabel={t('option.thumbnailPanel.moreOptionsMenu')}\n    >\n      <span className=\"visually-hidden\">\n        <p aria-live=\"assertive\" role=\"alert\"> {t('option.thumbnailPanel.moreOptionsMenu')}</p>\n      </span>\n      <PageManipulationOverlay\n        pageNumbers={pageNumbers}\n        pageManipulationOverlayItems={pageManipulationOverlayItems}\n      />\n    </ FlyoutMenu>\n  );\n}\n\nexport default PageManipulationOverlayContainer;","import PageManipulationOverlay from './PageManipulationOverlayContainer';\n\nexport default PageManipulationOverlay;"],"sourceRoot":""}