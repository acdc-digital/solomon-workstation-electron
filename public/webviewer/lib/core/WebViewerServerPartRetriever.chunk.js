/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{529:function(wa,ta,n){function pa(){return!1}function na(y,aa,ha){if(!(aa in w))return!0;aa=w[aa];for(var ca=0;ca<aa.length;ca++){var fa=y;var ba=aa[ca];var ma=ha;if(ba.name in fa){var la="",ja=!1;fa=fa[ba.name];switch(ba.type){case "s":la="String";ja=Object(ka.isString)(fa);break;case "a":la="Array";ja=Object(ka.isArray)(fa);break;case "n":la="Number";ja=Object(ka.isNumber)(fa)&&Object(ka.isFinite)(fa);break;case "o":la="Object",
ja=Object(ka.isObject)(fa)&&!Object(ka.isArray)(fa)}ja||ma.reject('Expected response field "'+ba.name+'" to have type '+la);ba=ja}else ma.reject('Response missing field "'+ba.name+'"'),ba=!1;if(!ba)return!1}return!0}function oa(y){for(var aa=0,ha=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];aa<ha.length;aa++){var ca=ha[aa],fa=ca;ca=ca.charAt(0).toUpperCase()+ca.slice(1);y[fa]&&(Object.defineProperty(y,ca,Object.getOwnPropertyDescriptor(y,
fa)),delete y[fa])}return y}n.r(ta);var ia=n(0),ka=n(1);n.n(ka);var ea=n(3);wa=n(51);var z=n(29),x=n(547),f=n(113),e=n(439),a=n(49),b=n(195),h=function(){function y(){this.request=this.result=null;this.state=0;var aa=this;aa.promise=new Promise(function(ha,ca){aa.resolve=function(){if(0===aa.state||4===aa.state)aa.state=1,aa.result=arguments[0],ha.apply(null,arguments)};aa.reject=function(){if(0===aa.state||4===aa.state)aa.state=2,ca.apply(null,arguments)}})}y.prototype.gw=function(){return 1===(this.state&
1)};y.prototype.Ira=function(){return 2===(this.state&2)};y.prototype.nk=function(){return!this.Ira()&&!this.gw()};y.prototype.jra=function(){return 4===(this.state&4)};y.prototype.LS=function(){this.state|=4};return y}(),r=function(){function y(){this.Rv={};this.hc=[]}y.prototype.pop=function(){var aa=this.hc.pop();this.Rv[aa.key]=void 0;return aa};y.prototype.push=function(aa,ha){ha={key:aa,data:ha};this.hc.push(ha);this.Rv[aa]=ha.data};y.prototype.contains=function(aa){return!!this.Rv[aa]};y.prototype.get=
function(aa){return this.Rv[aa]};y.prototype.set=function(aa,ha){var ca=this;this.Rv[aa]=ha;this.hc.forEach(function(fa,ba){fa.key===aa&&(ca.hc[ba]=fa)})};y.prototype.remove=function(aa){var ha=this;this.Rv[aa]=void 0;this.hc.forEach(function(ca,fa){ca.key===aa&&ha.hc.splice(fa,1)})};y.prototype.length=function(){return this.hc.length};return y}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},
{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};n=function(){function y(aa,ha,ca){var fa=this;this.rT=this.j_=!1;this.ti=this.gK=this.Ax=this.tf=this.Sy=this.Cq=this.Ry=this.Xo=null;this.zo=
new h;this.Rr=new h;this.zF=!1;this.Dg=this.xf=this.yf=this.rg=null;this.Zg=[];this.nG=[];this.cache={};this.timeStamp=0;this.ni=[];this.xk=[];this.eO=null;this.XZ=!1;this.x7=this.id=null;this.FQ=this.p2=pa;this.nj=0;this.EP=!1;this.r4=1;this.uk={};this.Ju=0;this.Kw=new r;ha.endsWith("/")||(ha+="/");ca=ca||{};this.j_=ca.disableWebsockets||!1;this.rT=ca.singleServerMode||!1;null!=ca.customQueryParameters&&Object(a.b)("wvsQueryParameters",ca.customQueryParameters);ha.endsWith("blackbox/")||(ha+="blackbox/");
this.Xo=ca.uploadData||null;this.Ax=ca.uriData||null;this.Ry=ca.cacheKey||null;if(this.Cq=ca.officeOptions||null)this.Cq=oa(this.Cq);this.tf=ca.rasterizerOptions||null;this.Sy=ca.cadOptions||null;this.Tf=ha;this.CN=aa;this.Nq(!0);this.av=(new x.a(ha,null,this.Zi())).zma(!this.j_,function(ba){fa.Bta(ba)},function(){return null},function(){fa.zF=!1},function(){fa.Zwa()})}y.prototype.Kia=function(){var aa=this;return new Promise(function(ha,ca){var fa=new XMLHttpRequest;fa.open("GET",aa.Tf+"ck");fa.withCredentials=
aa.Zi();fa.onreadystatechange=function(){fa.readyState===XMLHttpRequest.DONE&&(200===fa.status?ha():ca())};fa.send()})};y.prototype.Qya=function(aa){this.p2=aa||pa;this.FQ=pa};y.prototype.hha=function(){this.U6();return this.av.gs(!0)};y.prototype.U6=function(){Object(ia.b)(this,void 0,void 0,function(){return Object(ia.d)(this,function(aa){switch(aa.label){case 0:return this.Rr=new h,this.zo=new h,this.zF=!1,this.id=null,this.XZ=!1,[4,this.Kia()];case 1:return aa.ba(),[2]}})})};y.prototype.Zwa=function(){this.p2();
this.U6();this.rg&&(this.rg.nk()?this.yi(this.rg.request):this.rg.gw()&&this.FQ(this.rg.result.url,"pdf")&&(this.rg=null,this.S6()));this.Dg&&this.Dg.nk()&&this.yi(this.Dg.request);this.yf&&this.yf.nk()?this.yi(this.yf.request):this.xf&&this.xf.nk()&&this.X1();var aa;for(aa=0;aa<this.ni.length;aa++)this.ni[aa]&&(this.ni[aa].nk()?this.yi(this.ni[aa].request):this.ni[aa].gw()&&this.FQ(this.ni[aa].result.url,"image")&&(this.ni[aa]=null,this.WI(Object(ka.uniqueId)(),aa)));for(aa=0;aa<this.xk.length;aa++)this.xk[aa]&&
this.xk[aa].nk()&&!this.xk[aa].jra()&&this.yi(this.xk[aa].request);for(aa=0;aa<this.Zg.length;aa++)this.Zg[aa]&&this.Zg[aa].nk()&&this.yi(this.Zg[aa].request)};y.prototype.Jqa=function(){return this.zF?Promise.resolve():(this.zF=!0,this.timeStamp=Date.now(),this.av.rH())};y.prototype.PBa=function(){var aa=this,ha,ca,fa,ba,ma;return new Promise(function(la,ja){if(aa.Xo)ha=new FormData,ha.append("file",aa.Xo.fileHandle,aa.Xo.fileHandle.name),aa.Cq&&ha.append("officeOptions",JSON.stringify(aa.Cq)),aa.tf&&
ha.append("rasterizerOptions",JSON.stringify(aa.tf)),aa.Sy&&ha.append("cadOptions",aa.Sy.getJsonString()),aa.Ry&&ha.append("cacheKey",aa.Ry),ca=aa.Xo.loadCallback,ba="upload",fa=aa.Xo.extension;else if(aa.Ax)ha={uri:aa.Ax.uri,kGa:aa.Ax.shareId},ha=Object.keys(ha).map(function(sa){return sa+"="+(ha[sa]?encodeURIComponent(ha[sa]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",ca=aa.Ax.loadCallback,ba="url",fa=aa.Ax.extension;else{la();return}var ra=new XMLHttpRequest,qa=Object(z.k)(aa.Tf,
"AuxUpload");qa=Object(b.a)(qa,{type:ba,ext:fa});ra.open("POST",qa);ra.withCredentials=aa.Zi();ma&&ra.setRequestHeader("Content-Type",ma);ra.addEventListener("load",function(){if(ra.readyState===ra.DONE&&200===ra.status){var sa=JSON.parse(ra.response);aa.CN=sa.uri;ca(sa);la(sa)}});ra.addEventListener("error",function(){ja(ra.statusText+" "+JSON.stringify(ra))});aa.Xo&&null!=aa.Xo.onProgress&&(ra.upload.onprogress=function(sa){aa.Xo.onProgress(sa)});ra.send(ha)})};y.prototype.Nwa=function(aa){this.password=
aa||null;this.zo.gw()||(this.zo=new h,this.yi({t:"pages"}));return this.zo.promise};y.prototype.SB=function(aa){this.eO=aa||null;this.zo.gw()||this.yi({t:"pages"});return this.zo.promise};y.prototype.cz=function(aa){aa=Object.assign(aa,{uri:encodeURIComponent(this.CN)});this.eO&&(aa.ext=this.eO);this.ti&&(aa.c=this.ti);this.password&&(aa.pswd=this.password);this.Ry&&(aa.cacheKey=this.Ry);this.Cq&&(aa.officeOptions=this.Cq);this.tf&&(aa.rastOptions=this.tf);this.Sy&&(aa.cadOptions=this.Sy.mImpl);return aa};
y.prototype.Cxa=function(){0<this.Kw.length()&&10>=this.Ju&&this.Dxa(this.Kw.pop().data)};y.prototype.vga=function(aa){0<this.Kw.length()&&this.Kw.contains(aa)&&this.Kw.remove(aa)};y.prototype.yi=function(aa){aa=this.cz(aa);this.av.send(aa)};y.prototype.s7=function(aa,ha){10<this.Ju?this.Kw.push(aa,ha):(this.Ju++,aa=this.cz(ha),this.av.send(aa))};y.prototype.Dxa=function(aa){this.Ju++;aa=this.cz(aa);this.av.send(aa)};y.prototype.Dn=function(aa){return aa};y.prototype.o2=function(aa){this.rT&&aa?Object(ea.j)("Server failed health check. Single server mode ignoring check."):
!this.qEa&&aa&&3>=this.nj?(this.EP=!0,this.av.gs()):3<this.nj&&(this.rT=!0)};y.prototype.Bta=function(aa){var ha=this,ca=aa.data,fa=aa.err,ba=aa.t;switch(ba){case "upload":fa?this.QBa.reject(fa):this.QBa.resolve("Success");break;case "pages":fa?this.zo.reject(fa):na(ca,ba,this.zo)&&this.zo.resolve(ca);break;case "config":if(fa)this.Rr.reject(fa);else if(na(ca,ba,this.Rr)){this.o2(ca.unhealthy);ca.id&&(this.id=ca.id);if(ca.auth){var ma=Object(a.a)("wvsQueryParameters");ma.auth=ca.auth;Object(a.b)("wvsQueryParameters",
ma)}ca.serverVersion&&(this.gK=ca.serverVersion,Object(ea.h)("[WebViewer Server] server version: "+this.gK));ca.serverID?(this.nj=ca.serverID===this.x7&&this.EP?this.nj+1:0,this.x7=ca.serverID):this.nj=0;this.EP=!1;this.Rr.resolve(ca)}break;case "health":fa?this.Rr.reject(fa):na(ca,ba,this.Rr)&&this.o2(ca.unhealthy);break;case "pdf":ca.url=Object(b.a)(this.Tf+"../"+encodeURI(ca.url));fa?this.rg.reject(fa):na(ca,ba,this.rg)&&this.rg.resolve(ca);break;case "ApString2Xod":ca.url=Object(b.a)(this.Tf+
"../data/"+encodeURI(ca.url));fa?this.uk[ca.rID].reject(fa):na(ca,ba,this.uk[ca.rID])&&this.uk[ca.rID].resolve(ca);break;case "docmod":ca.url=Object(b.a)(this.Tf+"../"+encodeURI(ca.url));fa?this.uk[ca.rID].reject(fa):na(ca,ba,this.rg)&&this.uk[ca.rID].resolve(ca);break;case "xod":if(fa)this.yf&&this.yf.nk()&&this.yf.reject(fa),this.xf&&this.xf.nk()&&this.xf.reject(fa);else if(ca.notFound)ca.noCreate||this.yf&&this.yf.nk()&&this.yf.resolve(ca),this.xf&&this.xf.nk()&&this.xf.resolve(ca);else{ca.url&&
(ca.url=Object(b.a)(this.Tf+"../"+encodeURI(ca.url)));if(!this.xf||this.xf.gw())this.xf=new h,this.xf.request={t:"xod",noCreate:!0};this.yf||(this.yf=new h,this.yf.request={t:"xod"});this.xf.resolve(ca);this.yf.resolve(ca)}break;case "cAnnots":ma=this.Dg;if(fa)ma.reject(fa);else if(na(ca,ba,ma)){ma.LS();var la=[],ja=ca.annots;ca=function(Ia){var Ga=ja[Ia].s,Da=ja[Ia].e,La=ra.Tf+"../"+encodeURI(ja[Ia].xfdf),Ca="true"===ja[Ia].hasAppearance?Object(b.a)(La+".xodapp"):null,Ka=Object(ka.range)(Ga,Da+1);
la[Ia]={range:Ka,promise:new Promise(function(Pa,Ta){var Na=new XMLHttpRequest;Na.open("GET",Object(b.a)(La));Na.responseType="text";Na.withCredentials=ha.Zi();Na.addEventListener("load",function(){Na.readyState===Na.DONE&&200===Na.status&&Pa({Ut:Na.response,qn:Ca,range:Ka})});Na.addEventListener("error",function(){Ta(Na.statusText+" "+JSON.stringify(Na))});Na.send()})}};var ra=this;for(fa=0;fa<ja.length;fa++)ca(fa);ma.resolve(la)}break;case "annots":if(fa)this.Dg.reject(fa);else if(na(ca,ba,this.Dg)){this.Dg.LS();
var qa=new XMLHttpRequest;ma=this.Tf+"../"+encodeURI(ca.url);var sa=ca.hasAppearance?Object(b.a)(ma+".xodapp"):null;qa.open("GET",Object(b.a)(ma));qa.responseType="text";qa.withCredentials=this.Zi();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&ha.Dg.resolve({Ut:qa.response,qn:sa})});qa.addEventListener("error",function(){ha.Dg.reject(qa.statusText+" "+JSON.stringify(qa))});qa.send()}break;case "image":this.Ju--;var va=this.ni[ca.p];fa?va.promise.reject(fa):na(ca,
ba,va)&&(va.result=ca,va.result.url=Object(b.a)(this.Tf+"../"+encodeURI(va.result.url)),va.resolve(va.result));break;case "tiles":this.Ju--;va=ca.rID;ma=this.Zg[va];this.Zg[va]=null;this.nG.push(va);if(fa)ma.reject(fa);else if(na(ca,ba,ma)){for(fa=0;fa<ca.tiles.length;fa++)ca.tiles[fa]=Object(b.a)(this.Tf+"../"+encodeURI(ca.tiles[fa]));ma.resolve(ca)}break;case "text":va=this.xk[ca.p];if(fa)va.reject(fa);else if(na(ca,ba,va)){va.LS();var ya=new XMLHttpRequest;ca=Object(b.a)(this.Tf+"../"+encodeURI(ca.url));
ya.open("GET",ca);ya.withCredentials=this.Zi();ya.addEventListener("load",function(){ya.readyState===ya.DONE&&200===ya.status&&(va.result=JSON.parse(ya.response),va.resolve(va.result))});ya.addEventListener("error",function(Ia){va.reject(ya.statusText+" "+JSON.stringify(Ia))});ya.send()}break;case "progress":"loading"===ca.t&&this.trigger(f.a.Events.DOCUMENT_LOADING_PROGRESS,[ca.bytes,ca.total])}this.Cxa();!ba&&aa.echo&&aa&&"apstring2xod"===aa.echo.t&&(aa=aa.echo.reqID)&&(2<=parseInt(this.gK,10)?
this.uk[aa].reject("Message unhandled by server"):this.uk[aa].reject())};y.prototype.qna=function(){return Object(ia.b)(this,void 0,void 0,function(){return Object(ia.d)(this,function(aa){switch(aa.label){case 0:return[4,this.Jqa()];case 1:return aa.ba(),[2,this.Rr.promise]}})})};y.prototype.Wma=function(aa){for(var ha=this,ca=new XMLHttpRequest,fa=Object(b.a)(this.Tf+"aul",{id:this.id}),ba=new FormData,ma={},la=0;la<aa.body.length;la++){var ja=aa.body[la];ma[ja.id]=ja.pM.w+";"+ja.pM.h;ba.append(ja.id,
ja.pM.dataString)}aa={t:"apstring2xod",reqID:this.r4++,parts:ma};var ra=this.cz(aa);ba.append("msg",JSON.stringify(ra));this.uk[ra.reqID]=new h;ca.open("POST",fa);ca.withCredentials=this.Zi;fa=new Promise(function(qa,sa){ca.onreadystatechange=function(){4===ca.readyState&&(200===ca.status?qa():sa("An error occurred while sending down appearance strings to the server"))}});ca.send(ba);return fa.then(function(){return ha.uk[ra.reqID].promise})};y.prototype.kha=function(){var aa=this.gK.split("-")[0].split("."),
ha=["1","5","9"];if(3!==aa.length)throw Error("Invalid WVS version length.");if(3!==ha.length)throw Error("Invalid version length.");for(var ca=0;ca<aa.length;++ca){if(ha.length===ca||aa[ca]>ha[ca])return-1;if(aa[ca]!==ha[ca])return 1}return 0};y.prototype.Mr=function(){return 0>=this.kha()};y.prototype.qO=function(){this.Dg||(this.Dg=new h,this.Mr()?this.Dg.request={t:"cAnnots"}:this.Dg.request={t:"annots"},this.yi(this.Dg.request));return this.Dg.promise};y.prototype.WI=function(aa,ha){this.ni[ha]||
(this.ni[ha]=new h,this.ni[ha].request={t:"image",p:ha},this.s7(aa,this.ni[ha].request));return this.ni[ha].promise};y.prototype.Owa=function(aa){this.xk[aa]||(this.xk[aa]=new h,this.xk[aa].request={t:"text",p:aa},this.yi(this.xk[aa].request));return this.xk[aa].promise};y.prototype.Pwa=function(aa,ha,ca,fa,ba){var ma=this.Zg.length;this.nG.length&&(ma=this.nG.pop());this.Zg[ma]=new h;this.Zg[ma].request={t:"tiles",p:ha,z:ca,r:fa,size:ba,rID:ma};this.s7(aa,this.Zg[ma].request);return this.Zg[ma].promise};
y.prototype.S6=function(){this.rg||(this.rg=new h,this.rg.request={t:"pdf"},this.XZ?this.rg.resolve({url:this.CN}):this.yi(this.rg.request));return this.rg.promise};y.prototype.c1=function(aa){var ha=this,ca=new XMLHttpRequest,fa=Object(b.a)(this.Tf+"aul",{id:this.id}),ba=new FormData,ma={};aa.annots&&(ma.annots="xfdf");aa.watermark&&(ma.watermark="png");aa.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.r4++,parts:ma};aa.print&&(ma.print=!0);var la=this.cz(ma);ba.append("msg",JSON.stringify(la));
return Promise.all([aa.annots,aa.watermark,aa.redactions].map(function(ja){return Promise.resolve(ja)})).then(function(ja){var ra=ja[0],qa=ja[1];ja=ja[2];ra&&ba.append("annots",ra);qa&&ba.append("watermark",qa);ja&&ba.append("redactions",ja);ha.uk[la.reqID]=new h;ca.open("POST",fa);ca.withCredentials=ha.Zi;ra=new Promise(function(sa,va){ca.onreadystatechange=function(){4===ca.readyState&&(200===ca.status?sa():va("An error occurred while sending down annotation data to the server"))}});ca.send(ba);
return ra.then(function(){return ha.uk[la.reqID].promise})})};y.prototype.X1=function(){this.xf||(this.xf=new h,this.xf.request={t:"xod",noCreate:!0},this.yi(this.xf.request));return this.xf.promise};y.prototype.Qwa=function(){this.yf||(this.yf=new h,this.yf.request={t:"xod"},this.yi(this.yf.request));return this.yf.promise};y.prototype.Iq=function(){return!0};y.prototype.request=function(){};y.prototype.g6=function(){};y.prototype.abort=function(){for(var aa=0;aa<this.Zg.length;aa++)this.Zg[aa]&&
(this.Zg[aa].resolve(null),this.Zg[aa]=null,this.nG.push(aa));this.close()};y.prototype.jJ=function(aa){this.ti=this.ti||{};this.ti.headers=aa};y.prototype.Nq=function(aa){this.ti=this.ti||{};this.ti.internal=this.ti.internal||{};this.ti.internal.withCredentials=aa};y.prototype.Zi=function(){return this.ti&&this.ti.internal?this.ti.internal.withCredentials:null};y.prototype.getFileData=function(){return Promise.reject()};return y}();Object(wa.a)(n);Object(e.a)(n);Object(e.b)(n);ta["default"]=n},547:function(wa,
ta,n){var pa=n(0),na=n(3),oa=n(29),ia=n(49),ka=n(195),ea=n(86),z=function(){function f(e,a,b,h,r,w){void 0===b&&(b=null);void 0===h&&(h=null);void 0===r&&(r=null);void 0===w&&(w=null);this.T3=!1;this.nj=0;this.OY=this.kCa(e);this.url=a?this.OY+"/"+a:this.OY+"/ws";this.pN=b;this.oB=h;this.az=r;this.hS=w}f.prototype.kCa=function(e){var a=e.indexOf("://"),b="ws://";0>a?a=0:(5===a&&(b="wss://"),a+=3);var h=e.lastIndexOf("/");0>h&&(h=e.length);return b+e.slice(a,h)};f.prototype.send=function(e){this.Yq.readyState===
WebSocket.CLOSED||this.T3||this.Yq.send(JSON.stringify(e))};f.prototype.rH=function(){return Object(pa.b)(this,void 0,void 0,function(){var e,a=this;return Object(pa.d)(this,function(){e=Object(ia.a)("wvsQueryParameters");e.bcid=Object(oa.l)(8);Object(ia.b)("wvsQueryParameters",e);return[2,new Promise(function(b,h){var r=Object(ka.a)(a.url);a.Yq=new WebSocket(r);a.Yq.onopen=function(){a.oB&&a.oB();b()};a.Yq.onerror=function(w){a.T3=!0;h(w)};a.Yq.onclose=function(w){var y=w.code;return Object(pa.b)(a,
void 0,void 0,function(){var aa=this;return Object(pa.d)(this,function(ha){switch(ha.label){case 0:return this.az&&this.az(),3E3===y?[3,3]:8>this.nj++?[4,new Promise(function(ca){return setTimeout(function(){return Object(pa.b)(aa,void 0,void 0,function(){return Object(pa.d)(this,function(fa){switch(fa.label){case 0:return this.hS(),[4,this.rH()];case 1:return fa.ba(),ca(),[2]}})})},3E3)})]:[3,2];case 1:return ha.ba(),[3,3];case 2:h(ea.a),ha.label=3;case 3:return[2]}})})};a.Yq.onmessage=function(w){w&&
w.data&&(w=JSON.parse(w.data),w.hb?a.send({hb:!0}):w.end?close():a.pN(w))}})]})})};f.prototype.gs=function(e){void 0===e&&(e=!1);this.nj=0;e?this.Yq.close(3E3):this.Yq.close();return Promise.resolve()};return f}(),x=function(){function f(e,a,b,h,r,w,y){void 0===h&&(h=null);void 0===r&&(r=null);void 0===w&&(w=null);void 0===y&&(y=null);this.nj=this.VI=this.id=0;this.uA=!1;this.request=null;e=this.cva(e);this.url=a?e+"/"+a+"pf":e+"/pf";this.$J=b;this.pN=h;this.oB=r;this.az=w;this.hS=y}f.prototype.cva=
function(e){var a=e.lastIndexOf("/");0>a&&(a=e.length);return e.slice(0,a)};f.prototype.nia=function(e){e=e.split("\n");for(e[e.length-1]&&e.pop();0<e.length&&3>e[e.length-1].length;)"]"===e.pop()&&(this.id=0);0<e.length&&3>e[0].length&&e.shift();for(var a=0;a<e.length;++a)e[a].endsWith(",")&&(e[a]=e[a].substr(0,e[a].length-1));return e};f.prototype.e7=function(){return Object(pa.b)(this,void 0,void 0,function(){var e=this;return Object(pa.d)(this,function(a){switch(a.label){case 0:return 8>this.nj++?
[4,new Promise(function(b){return setTimeout(function(){e.hS();e.rH();b()},3E3)})]:[3,2];case 1:a.ba(),a.label=2;case 2:return[2]}})})};f.prototype.eva=function(e){Object(pa.b)(this,void 0,void 0,function(){var a,b;return Object(pa.d)(this,function(h){switch(h.label){case 0:a=null,b=0,h.label=1;case 1:if(!(b<e.length))return[3,6];a=JSON.parse(e[b]);if(!a)return[3,5];if(!a.end)return[3,2];close();return[3,5];case 2:if(!a.id||Number(a.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");
this.gs();return[4,this.e7()];case 3:return h.ba(),[3,5];case 4:a.hb&&Number(a.id)===this.id?this.send({hb:!0}):this.uA||this.pN(a),h.label=5;case 5:return++b,[3,1];case 6:return[2]}})})};f.prototype.yta=function(e){Object(pa.b)(this,void 0,void 0,function(){var a,b,h;return Object(pa.d)(this,function(r){switch(r.label){case 0:if(!(3<=e.readyState))return[3,2];try{a=e.responseText.length}catch(w){return Object(na.h)("caught exception"),[2]}if(0<a)try{b=this.nia(e.responseText),0===this.id&&0<b.length&&
(h=JSON.parse(b.shift()),this.id=h.id,this.nj=0),this.eva(b)}catch(w){}return this.uA?[3,2]:[4,this.S_()];case 1:r.ba(),r.label=2;case 2:return[2]}})})};f.prototype.S_=function(){return Object(pa.b)(this,void 0,void 0,function(){var e=this;return Object(pa.d)(this,function(){return[2,new Promise(function(a,b){function h(){return Object(pa.b)(e,void 0,void 0,function(){return Object(pa.d)(this,function(w){switch(w.label){case 0:b(),this.gs(),w.label=1;case 1:return this.uA&&8>this.nj?[4,this.e7()]:
[3,3];case 2:return w.ba(),[3,1];case 3:return[2]}})})}e.request=new XMLHttpRequest;e.request.withCredentials=e.$J;var r=Object(ka.a)(e.url,0!==e.id?{id:String(e.id),uc:String(e.VI)}:{uc:String(e.VI)});e.VI++;e.request.open("GET",r,!0);e.request.setRequestHeader("Cache-Control","no-cache");e.request.setRequestHeader("X-Requested-With","XMLHttpRequest");e.request.onreadystatechange=function(){e.yta(e.request)};e.request.addEventListener("error",h);e.request.addEventListener("timeout",h);e.request.addEventListener("load",
function(){e.oB&&e.oB();a()});e.request.send()})]})})};f.prototype.rH=function(){var e=Object(ia.a)("wvsQueryParameters");e.bcid=Object(oa.l)(8);Object(ia.b)("wvsQueryParameters",e);this.VI=this.id=0;this.uA=!1;return this.S_()};f.prototype.send=function(e){var a=this,b=new XMLHttpRequest;b.withCredentials=this.$J;var h=Object(ka.a)(this.url,{id:String(this.id)}),r=new FormData;r.append("data",JSON.stringify(e));b.addEventListener("error",function(){a.gs()});b.open("POST",h);b.setRequestHeader("X-Requested-With",
"XMLHttpRequest");b.send(r)};f.prototype.gs=function(){this.id=0;this.uA=!0;this.az&&this.az();this.request.abort();return Promise.resolve()};return f}();wa=function(){function f(e,a,b){this.wZ=e;this.target=a;this.$J=b}f.prototype.zma=function(e,a,b,h,r){void 0===e&&(e=!0);void 0===a&&(a=null);void 0===b&&(b=null);void 0===h&&(h=null);void 0===r&&(r=null);return e?new z(this.wZ,this.target,a,b,h,r):new x(this.wZ,this.target,this.$J,a,b,h,r)};return f}();ta.a=wa}}]);}).call(this || window)

//# sourceMappingURL=WebViewerServerPartRetriever.chunk.js.map