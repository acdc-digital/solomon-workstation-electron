/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[0],{518:function(wa,ta,n){n.r(ta);n.d(ta,"ByteRangeRequest",function(){return w});var pa=n(0),na=n(1);n.n(na);var oa=n(3),ia=n(177);wa=n(113);var ka=n(294),ea=n(88),z=n(85),x=n(293),f=n(195);n=n(439);var e=[],a=[],b=window,h=function(){return function(){this.Go=1}}(),r;(function(aa){aa[aa.UNSENT=0]="UNSENT";aa[aa.DONE=4]="DONE"})(r||(r={}));var w=function(){function aa(ha,ca,fa,ba){var ma=this;this.url=ha;this.range=ca;this.hg=fa;
this.withCredentials=ba;this.kca=r;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);b.Uint8Array&&(this.request.responseType="arraybuffer");ba&&(this.request.withCredentials=ba);y.DISABLE_RANGE_HEADER||(Object(na.isUndefined)(ca.stop)?this.request.setRequestHeader("Range","bytes="+ca.start):this.request.setRequestHeader("Range",["bytes=",ca.start,"-",ca.stop-1].join("")));fa&&Object.keys(fa).forEach(function(la){ma.request.setRequestHeader(la,fa[la])});this.request.overrideMimeType?
this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=x.a.NOT_STARTED}aa.prototype.start=function(ha){var ca=this,fa=this.request;fa.onreadystatechange=function(){if(ca.aborted)return ca.status=x.a.ABORTED,ha({code:x.a.ABORTED});if(this.readyState===ca.kca.DONE){ca.OG();var ba=0===window.document.URL.indexOf("file:///");200===fa.status||206===fa.status||ba&&0===fa.status?(ba=b.u1(this),ca.yT(ba,ha)):(ca.status=
x.a.ERROR,ha({code:ca.status,status:ca.status}))}};this.request.send(null);this.status=x.a.STARTED};aa.prototype.yT=function(ha,ca){this.status=x.a.SUCCESS;if(ca)return ca(!1,ha)};aa.prototype.abort=function(){this.OG();this.aborted=!0;this.request.abort()};aa.prototype.OG=function(){var ha=Object(f.c)(this.url,this.range,a);-1!==ha&&a.splice(ha,1);if(0<e.length){ha=e.shift();var ca=new aa(ha.url,ha.range,this.hg,this.withCredentials);ha.request=ca;a.push(ha);ca.start(Object(f.d)(ha))}};aa.prototype.extend=
function(ha){var ca=Object.assign({},this,ha.prototype);ca.constructor=ha;return ca};return aa}(),y=function(aa){function ha(ca,fa,ba,ma,la){ba=aa.call(this,ca,ba,ma)||this;ba.Dk={};ba.hF=fa;ba.url=ca;ba.DISABLE_RANGE_HEADER=!1;ba.KB=w;ba.RU=3;ba.hg=la||{};return ba}Object(pa.c)(ha,aa);ha.prototype.fz=function(ca,fa,ba){var ma=-1===ca.indexOf("?")?"?":"&";switch(ba){case !1:case z.a.NEVER_CACHE:ca=ca+ma+"_="+Object(na.uniqueId)();break;case !0:case z.a.CACHE:ca=ca+ma+"_="+fa.start+","+(Object(na.isUndefined)(fa.stop)?
"":fa.stop)}return ca};ha.prototype.KZ=function(ca,fa,ba,ma){void 0===ba&&(ba={});return new this.KB(ca,fa,ba,ma)};ha.prototype.zla=function(ca,fa,ba,ma,la){for(var ja=0;ja<e.length;ja++)if(Object(na.isEqual)(e[ja].range,fa)&&Object(na.isEqual)(e[ja].url,ca))return e[ja].Uh.push(ma),e[ja].$H++,null;for(ja=0;ja<a.length;ja++)if(Object(na.isEqual)(a[ja].range,fa)&&Object(na.isEqual)(a[ja].url,ca))return a[ja].Uh.push(ma),a[ja].$H++,null;ba={url:ca,range:fa,hF:ba,Uh:[ma],$H:1};if(0===e.length&&a.length<
this.RU)return a.push(ba),ba.request=this.KZ(ca,fa,la,this.withCredentials),ba;e.push(ba);return null};ha.prototype.yq=function(ca,fa,ba){var ma=this.fz(ca,fa,this.hF);(ca=this.zla(ma,fa,this.hF,ba,this.hg))&&ca.request.start(Object(f.d)(ca));return function(){var la=Object(f.c)(ma,fa,a);if(-1!==la){var ja=--a[la].$H;0===ja&&a[la].request&&a[la].request.abort()}else la=Object(f.c)(ma,fa,e),-1!==la&&(ja=--e[la].$H,0===ja&&e.splice(la,1))}};ha.prototype.Q0=function(){return{start:-ia.a}};ha.prototype.$pa=
function(){var ca=-(ia.a+ia.e);return{start:ca-ia.d,end:ca}};ha.prototype.nw=function(ca){var fa=this;this.oF=!0;var ba=ia.a;this.yq(this.url,this.Q0(),function(ma,la,ja){function ra(){var qa=fa.le.N0();fa.yq(fa.url,qa,function(sa,va){if(sa)return Object(oa.j)("Error loading central directory: "+sa),ca(sa);va=Object(ea.a)(va);if(va.length!==qa.stop-qa.start)return ca("Invalid XOD file: Zip central directory data is wrong size! Should be "+(qa.stop-qa.start)+" but is "+va.length);fa.le.X5(va);fa.TM=
!0;fa.oF=!1;return ca(!1)})}if(ma)return Object(oa.j)("Error loading end header: "+ma),ca(ma,la,ja);la=Object(ea.a)(la);if(la.length!==ba)return ca("Invalid XOD file: Zip end header data is wrong size!");try{fa.le=new ka.a(la)}catch(qa){return ca(qa)}fa.le.Wra?fa.yq(fa.url,fa.$pa(),function(qa,sa){if(qa)return Object(oa.j)("Error loading zip64 header: "+qa),ca(qa);sa=Object(ea.a)(sa);fa.le.xsa(sa);ra()}):ra()})};ha.prototype.o1=function(ca){ca(Object.keys(this.le.Yp))};ha.prototype.OR=function(ca,
fa){var ba=this;if(this.le.zZ(ca)){var ma=this.le.Uz(ca);if(ma in this.Dk){var la=this.ui[ca];la.Xu=this.Dk[ma];la.Xu.Go++;la.cancel=la.Xu.cancel}else{var ja=this.le.aoa(ca),ra=this.yq(this.url,ja,function(sa,va){sa?(Object(oa.j)('Error loading part "'+ca+'": '+sa),ba.yq(ba.url,ja,function(ya,Ia){if(ya)return fa(ya,ca);ba.b6(Ia,ja,ma,ca,fa)})):ba.b6(va,ja,ma,ca,fa)}),qa=this.ui[ca];qa&&(qa.K8=!0,qa.cancel=function(){qa.Xu.Go--;0===qa.Xu.Go&&(ra(),delete ba.Dk[ma])},this.Dk[ma]=new h(ma),qa.Xu=this.Dk[ma],
qa.Xu.cancel=qa.cancel)}}else delete this.ui[ca],fa(Error('File not found: "'+ca+'"'),ca)};ha.prototype.b6=function(ca,fa,ba,ma,la){if(ca.length!==fa.stop-fa.start)la(Error("Part data is wrong size!"),ma);else{do{if(!this.Dk[ba])return;ma=this.Dk[ba].Go;for(var ja=fa.wt.length,ra=0;ra<ja;++ra){var qa=fa.wt[ra];la(!1,qa.rt,ca["string"===typeof ca?"substring":"subarray"](qa.start,qa.stop),this.le.P2(qa.rt));qa.rt in this.ui&&delete this.ui[qa.rt]}}while(ma!==this.Dk[ba].Go);delete this.Dk[ba]}};ha.DISABLE_RANGE_HEADER=
!1;ha.RU=3;return ha}(wa.a);(function(aa){function ha(ca,fa,ba){var ma=aa.call(this)||this,la;for(la in ca)ma[la]=ca[la];ma.LFa=ca;ma.startOffset=fa;ma.endOffset=ba;ma.KZ=function(ja,ra,qa,sa){Object(na.isUndefined)(ra.stop)?(ra.start+=ma.endOffset,ra.stop=ma.endOffset):(ra.start+=ma.startOffset,ra.stop+=ma.startOffset);ja=ma.fz(ma.url,ra,ma.hF);return new ca.KB(ja,ra,qa,sa)};return ma}Object(pa.c)(ha,aa);return ha})(y);Object(n.a)(y);Object(n.b)(y);ta["default"]=y}}]);}).call(this || window)

//# sourceMappingURL=HttpPartRetriever.chunk.js.map