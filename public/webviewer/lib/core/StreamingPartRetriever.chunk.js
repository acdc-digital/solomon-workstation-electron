/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[11],{527:function(wa,ta,n){n.r(ta);var pa=n(0),na=n(1);n.n(na);var oa=n(3),ia=n(177);wa=n(51);var ka=n(113),ea=n(294),z=n(85),x=n(293);n=n(439);var f=window,e=function(){function h(r,w,y){var aa=-1===r.indexOf("?")?"?":"&";switch(w){case z.a.NEVER_CACHE:this.url=r+aa+"_="+Object(na.uniqueId)();break;default:this.url=r}this.hg=y;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);this.request.setRequestHeader("X-Requested-With",
"XMLHttpRequest");this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=x.a.NOT_STARTED}h.prototype.start=function(r,w){var y=this,aa=this,ha=this.request,ca;aa.VA=0;r&&Object.keys(r).forEach(function(fa){y.request.setRequestHeader(fa,r[fa])});w&&(this.request.withCredentials=w);this.GI=setInterval(function(){var fa=0===window.document.URL.indexOf("file:///");fa=200===ha.status||
fa&&0===ha.status;if(ha.readyState!==x.b.DONE||fa){try{ha.responseText}catch(ba){return}aa.VA<ha.responseText.length&&(ca=aa.kva())&&aa.trigger(h.Events.DATA,[ca]);0===ha.readyState&&(clearInterval(aa.GI),aa.trigger(h.Events.DONE))}else clearInterval(aa.GI),aa.trigger(h.Events.DONE,["Error received return status "+ha.status])},1E3);this.request.send(null);this.status=x.a.STARTED};h.prototype.kva=function(){var r=this.request,w=r.responseText;if(0!==w.length)if(this.VA===w.length)clearInterval(this.GI),
this.trigger(h.Events.DONE);else return w=Math.min(this.VA+3E6,w.length),r=f.u1(r,this.VA,!0,w),this.VA=w,r};h.prototype.abort=function(){clearInterval(this.GI);var r=this;this.request.onreadystatechange=function(){Object(oa.j)("StreamingRequest aborted");r.status=x.a.ABORTED;return r.trigger(h.Events.ABORTED)};this.request.abort()};h.prototype.finish=function(){var r=this;this.request.onreadystatechange=function(){r.status=x.a.SUCCESS;return r.trigger(h.Events.DONE)};this.request.abort()};h.Events=
{DONE:"done",DATA:"data",ABORTED:"aborted"};return h}();Object(wa.a)(e);var a;(function(h){h[h.LOCAL_HEADER=0]="LOCAL_HEADER";h[h.FILE=1]="FILE";h[h.CENTRAL_DIR=2]="CENTRAL_DIR"})(a||(a={}));var b=function(h){function r(){var w=h.call(this)||this;w.buffer="";w.state=a.LOCAL_HEADER;w.qT=4;w.oo=null;w.rw=ia.c;w.Yp={};return w}Object(pa.c)(r,h);r.prototype.dva=function(w){var y;for(w=this.buffer+w;w.length>=this.rw;)switch(this.state){case a.LOCAL_HEADER:this.oo=y=this.ova(w.slice(0,this.rw));if(y.ax!==
ia.g)throw Error("Wrong signature in local header: "+y.ax);w=w.slice(this.rw);this.state=a.FILE;this.rw=y.GM+y.et+y.zz+this.qT;this.trigger(r.Events.HEADER,[y]);break;case a.FILE:this.oo.name=w.slice(0,this.oo.et);this.Yp[this.oo.name]=this.oo;y=this.rw-this.qT;var aa=w.slice(this.oo.et+this.oo.zz,y);this.trigger(r.Events.FILE,[this.oo.name,aa,this.oo.$M]);w=w.slice(y);if(w.slice(0,this.qT)===ia.h)this.state=a.LOCAL_HEADER,this.rw=ia.c;else return this.state=a.CENTRAL_DIR,!0}this.buffer=w;return!1};
r.Events={HEADER:"header",FILE:"file"};return r}(ea.a);Object(wa.a)(b);wa=function(h){function r(w,y,aa,ha,ca){aa=h.call(this,w,aa,ha)||this;aa.url=w;aa.stream=new e(w,y);aa.le=new b;aa.D5=window.createPromiseCapability();aa.h6={};aa.hg=ca;return aa}Object(pa.c)(r,h);r.prototype.SB=function(w){var y=this;this.request([this.Qk,this.Qm,this.Pk]);this.stream.addEventListener(e.Events.DATA,function(aa){try{if(y.le.dva(aa))return y.stream.finish()}catch(ha){throw y.stream.abort(),y.ns(ha),w(ha),ha;}});
this.stream.addEventListener(e.Events.DONE,function(aa){y.Dua=!0;y.D5.resolve();aa&&(y.ns(aa),w(aa))});this.le.addEventListener(b.Events.HEADER,Object(na.bind)(this.g6,this));this.le.addEventListener(b.Events.FILE,Object(na.bind)(this.Fva,this));return this.stream.start(this.hg,this.withCredentials)};r.prototype.o1=function(w){var y=this;this.D5.promise.then(function(){w(Object.keys(y.le.Yp))})};r.prototype.Iq=function(){return!0};r.prototype.request=function(w){var y=this;this.Dua&&w.forEach(function(aa){y.h6[aa]||
y.kBa(aa)})};r.prototype.g6=function(){};r.prototype.abort=function(){this.stream&&this.stream.abort()};r.prototype.kBa=function(w){this.trigger(ka.a.Events.PART_READY,[{zb:w,error:"Requested part not found",Wj:!1,kh:!1}])};r.prototype.Fva=function(w,y,aa){this.h6[w]=!0;this.trigger(ka.a.Events.PART_READY,[{zb:w,data:y,Wj:!1,kh:!1,error:null,Qd:aa}])};return r}(ka.a);Object(n.a)(wa);Object(n.b)(wa);ta["default"]=wa}}]);}).call(this || window)

//# sourceMappingURL=StreamingPartRetriever.chunk.js.map